(function(a){a.fn.extend({highlight:function(b,c){var d=a(this),e={onlyFirst:!0,idPrefix:"_",className:"jQuery_Highlight",fuzzy:!0,ignoredChars:/\r|\n|\s/,ignoredTags:/(script|style|iframe|object|embed)/i,callback:function(){}},c=a.extend(e,c),f={search:"",length:0,pos:0,range:null,found:!1,count:1,search:function(b,d){this.search=c.fuzzy?a.trim(b):b,this.length=this.search.length,this.range=document.createRange(),this.startSearch(d,function(a){c.callback(f.surroundContent(a)),f.count++})},startSearch:function(b,d){b.contents().each(function(){if(f.found&&c.onlyFirst)return!1;if(this.nodeType==3){var b=this.textContent,e=b.length;for(var g=0;g<e;g++){if(f.pos>0&&c.fuzzy){if(c.ignoredChars.test(b[g]))continue;if(c.ignoredChars.test(f.search[f.pos]))while(c.ignoredChars.test(f.search[f.pos]))f.pos++}if(b[g]==f.search[f.pos]){f.pos==0&&f.range.setStart(this,g),f.pos++;if(f.pos==f.length)return f.found=!0,f.range.setEnd(this,g+1),d(f.range),!1}else f.pos=0}}else c.ignoredTags.test(this.tagName)||f.startSearch(a(this),d)})},surroundContent:function(b){var d=b.extractContents();d.childNodes.length>1&&a(d).contents().each(function(){/(p|div)/i.test(this.tagName)&&a(this).wrapInner('<span class="'+c.className+'">')});var e=document.createElement("span");return e.id=c.idPrefix+f.count,e.className=c.className,e.appendChild(d),b.insertNode(e),e}};return f.search(b,d),d}})})(jQuery);